<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TEMPESTO</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap');
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            color: #00ff00;
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
            touch-action: none; /* Prevent browser handling of touch events */
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Mobile touch controls */
        #mobile-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            display: none; /* Hidden by default, shown on mobile */
            z-index: 0;
            pointer-events: all;
        }

        .control-row {
            display: flex;
            justify-content: start;
            margin-bottom: 10px;
            padding: 0 20px;
        }

        .hidden {
            display: none;
        }

        .touch-button {
            width: 60px;
            height: 60px;
            background-color: rgba(0, 255, 255, 0.2);
            border: 2px solid rgba(0, 255, 255, 0.5);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #00ffff;
            font-size: 24px;
            text-shadow: 0 0 5px #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
            user-select: none;
            touch-action: none;
            margin: 5px;
        }

        .touch-button:active {
            background-color: rgba(0, 255, 255, 0.4);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }

        #fire-button {
            width: 80px;
            height: 80px;
            background-color: rgba(255, 0, 0, 0.2);
            border: 2px solid rgba(255, 0, 0, 0.5);
            color: #ff0000;
            text-shadow: 0 0 5px #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        #fire-button:active {
            background-color: rgba(255, 0, 0, 0.4);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        #bomb-button {
            width: 80px;
            height: 80px;
            background-color: rgba(255, 255, 0, 0.2);
            border: 2px solid rgba(255, 255, 0, 0.5);
            color: #ffff00;
            text-shadow: 0 0 5px #ffff00;
            box-shadow: 0 0 10px rgba(255, 255, 0, 0.3);
        }

        #bomb-button:active {
            background-color: rgba(255, 255, 0, 0.4);
            box-shadow: 0 0 15px rgba(255, 255, 0, 0.5);
        }

        #pause-button {
            background-color: rgba(0, 255, 0, 0.2);
            border: 2px solid rgba(0, 255, 0, 0.5);
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        #rotate-button {
            background-color: rgba(255, 0, 255, 0.2);
            border: 2px solid rgba(255, 0, 255, 0.5);
            color: #ff00ff;
            text-shadow: 0 0 5px #ff00ff;
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.3);
            font-size: 16px;
        }

        #rotate-button:active {
            background-color: rgba(255, 0, 255, 0.4);
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.5);
        }

        /* Shared styles for UI and Menu */
        #ui, #game-over, #menu, #level-complete {
            position: absolute;
            /*z-index: 100;*/
            pointer-events: none;
            text-shadow: 0 0 5px;
            font-size: 1em;
        }

        #ui {
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            /*max-width: 600px;*/
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
            display: flex;
            flex-direction: column;
            gap: 5px;
            position: relative;
            z-index: 200;
        }

        #ui:before {
            content: "TEMPESTO";
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #000;
            padding: 0 10px;
            font-size: 1.2em;
            color: #ff00ff;
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .ui-row {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            padding: 3px 0;
            /*border-bottom: 1px solid rgba(0, 255, 255, 0.3);*/
        }

        #score, #high-score {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffff00;
            text-shadow: 0 0 10px #ffff00;
            padding: 3px 6px;
            background-color: rgba(255, 255, 0, 0.1);
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 0, 0.3);
            box-shadow: inset 0 0 10px rgba(255, 255, 0, 0.2);
            letter-spacing: 1px;
        }

        #lives, #bombs {
            color: #ff5555;
            text-shadow: 0 0 8px #ff0000;
            padding: 3px 6px;
            background-color: rgba(255, 0, 0, 0.1);
            border-radius: 4px;
            border: 1px solid rgba(255, 0, 0, 0.3);
            box-shadow: inset 0 0 10px rgba(255, 0, 0, 0.2);
            letter-spacing: 0;
        }

        #enemies-remaining {
            color: #55ff55;
            text-shadow: 0 0 8px #00ff00;
            padding: 3px 6px;
            background-color: rgba(0, 255, 0, 0.1);
            border-radius: 4px;
            border: 1px solid rgba(0, 255, 0, 0.3);
            box-shadow: inset 0 0 10px rgba(0, 255, 0, 0.2);
            letter-spacing: 0;
        }

        #power-ups #active-power {
            color: #ff00ff;
            text-shadow: 0 0 8px #ff00ff;
            padding: 3px 6px;
            background-color: rgba(255, 0, 255, 0.1);
            border-radius: 4px;
            border: 1px solid rgba(255, 0, 255, 0.3);
            box-shadow: inset 0 0 10px rgba(255, 0, 255, 0.2);
            letter-spacing: 0;
        }

        #level-indicator #current-level {
            color: #00ffff;
            text-shadow: 0 0 8px #00ffff;
            padding: 3px 6px;
            background-color: rgba(0, 255, 255, 0.1);
            border-radius: 4px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.2);
            letter-spacing: 0;
            font-size: 1em;
            font-weight: bold;
            display: inline-block;
        }

        #game-over, #level-complete {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: none;
            pointer-events: all;
        }

        #game-over {
            color: #ff0000;
            text-shadow: 0 0 10px #ff0000;
        }

        #level-complete {
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
        }

        #game-over h1, #level-complete h1 {
            margin: 0 0 15px 0;
            font-size: 2.5em;
        }

        #game-over #final-score, #level-complete #level-score {
            margin-bottom: 20px;
        }

        #menu {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #ffff00;
            padding: 30px;
            text-align: center;
            color: #ffff00;
            text-shadow: 0 0 5px #ffff00;
            pointer-events: all;
            max-width: 90%;
            width: 400px;
            box-sizing: border-box;
        }

        #menu h1 {
            margin: 0 0 20px 0;
            font-size: 1.8em;
            text-shadow: 0 0 10px #ffff00;
        }

        #menu div {
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #menu label {
            margin-right: 10px;
            white-space: nowrap;
        }

        #menu select, #menu button, #game-over button, #level-complete button {
            padding: 8px 15px;
            cursor: pointer;
            background-color: #000;
            color: #ffff00;
            border: 2px solid #ffff00;
            text-shadow: 0 0 5px #ffff00;
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
            font-size: 0.8em;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            border-radius: 0;
            min-width: 100px;
        }

        #menu select option {
            background-color: #000;
            color: #ffff00;
        }

        #menu button, #game-over button, #level-complete button {
            width: 100%;
            margin-top: 10px;
        }

        .toggle-button {
            width: 60px !important;
            text-align: center;
            background-color: rgba(0, 255, 0, 0.2);
            border: 2px solid rgba(0, 255, 0, 0.5);
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        .toggle-button.off {
            background-color: rgba(255, 0, 0, 0.2);
            border: 2px solid rgba(255, 0, 0, 0.5);
            color: #ff0000;
            text-shadow: 0 0 5px #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        #menu button:hover, #game-over button:hover, #level-complete button:hover {
            text-shadow: 0 0 15px #ffff00;
            box-shadow: 0 0 10px #ffff00;
        }

        /* Power-up indicator */
        #power-ups {
            color: #ff00ff;
            text-shadow: 0 0 8px #ff00ff;
            font-weight: bold;
        }

        /* Level indicator */
        #level-indicator {
            color: #00ffff;
            text-shadow: 0 0 8px #00ffff;
            font-weight: bold;
            font-size: 1.2em;
        }

        /* Pause screen */
        #pause-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffffff;
            text-shadow: 0 0 10px #ffffff;
            font-size: 2em;
            display: none;
            z-index: 101;
        }

        /* Instructions */
        #instructions-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ffff;
            padding: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.8em;
            z-index: 102;
            display: none;
            max-width: 90%;
            width: 500px;
            box-sizing: border-box;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        #instructions-modal h2 {
            margin-top: 0;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
        }

        #instructions-modal button {
            padding: 8px 15px;
            cursor: pointer;
            background-color: #000;
            color: #00ffff;
            border: 2px solid #00ffff;
            text-shadow: 0 0 5px #00ffff;
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
            font-size: 0.8em;
            margin-top: 15px;
            width: 100%;
        }

        #instructions-modal button:hover {
            text-shadow: 0 0 15px #00ffff;
            box-shadow: 0 0 10px #00ffff;
        }

        .game-button {
            position: fixed;
            bottom: 10px;
            background-color: rgba(0, 255, 255, 0.2);
            border: 2px solid rgba(0, 255, 255, 0.5);
            color: #00ffff;
            text-shadow: 0 0 5px #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            cursor: pointer;
            z-index: 100;
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
        }

        #instructions-button {
            left: calc(50% - 30px);
            transform: translateX(-50%);
        }

        #game-sound-toggle {
            left: calc(50% + 30px);
            transform: translateX(-50%);
        }

        /* Mobile styles for game buttons */
        @media (max-width: 800px), (max-height: 600px) {
            #instructions-button {
                padding: 5px 10px;
                width: 30px;
                height: 30px;
                display: flex;
                justify-content: center;
                align-items: center;
                border-radius: 50%;
            }

            #game-sound-toggle {
                padding: 5px 10px;
                width: 30px;
                height: 30px;
                display: flex;
                justify-content: center;
                align-items: center;
                border-radius: 50%;
            }
        }
    </style>
</head>
<body>

<div id="pause-screen">PAUSED</div>

<div id="instructions-modal">
    <h2>INSTRUCTIONS</h2>
    <p>ARROWS: MOVE | SPACE: FIRE | B: BOMB | P/ENTER: PAUSE</p>
    <p>MOUSE: ROTATE TUNNEL | CLICK: TOGGLE ROTATION</p>
    <button id="close-instructions-button">CLOSE</button>
</div>

<!--<div id="instructions-button" class="game-button">I</div>-->
<div style="margin-left: -55px;" id="game-sound-toggle" class="ame-button oggle-button">S</div>
<!-- Mobile touch controls -->
<div id="mobile-controls">
    <div style="display: flex; justify-content: space-between; width: 100%">
    <div class="control-row">
        <div id="left-button" class="touch-button">←</div>
        <div id="right-button" class="touch-button">→</div>
    </div>
    <div class="control-row">
        <div id="bomb-button" class="touch-button">BOMB</div>
        <div id="fire-button" class="touch-button">FIRE</div>
    </div>
    </div>
</div>

<div id="game-over">
    <h1>GAME OVER</h1>
    <div id="final-score"></div>
    <div id="final-high-score"></div>
    <button id="restart-button">RESTART</button>
</div>

<div id="level-complete">
    <h1>LEVEL COMPLETE</h1>
    <div id="level-score"></div>
    <div id="level-high-score"></div>
    <button id="next-level-button">NEXT LEVEL</button>
</div>

<div id="menu">
    <h1>TEMPESTO</h1>
    <div>
        <label for="speed-select">PLAYER SPEED:</label>
        <select id="speed-select">
            <option value="slow" selected>SLOW</option>
            <option value="normal">NORMAL</option>
            <option value="fast">FAST</option>
        </select>
    </div>
    <div>
        <label for="difficulty-select">DIFFICULTY:</label>
        <select id="difficulty-select">
            <option value="easy">EASY</option>
            <option value="medium" selected>MEDIUM</option>
            <option value="hard">HARD</option>
        </select>
    </div>
    <div>
        <label for="web-type-select">WEB TYPE:</label>
        <select id="web-type-select">
            <option value="circle">CIRCLE</option>
            <option value="pentagon">PENTAGON</option>
            <option value="hexagon">HEXAGON</option>
            <option value="octagon">OCTAGON</option>
            <option value="random" selected>RANDOM</option>
        </select>
    </div>
    <div style="display: none !important;">
        <label for="tube-width-select">TUBE WIDTH:</label>
        <select id="tube-width-select">
            <option value="wire">WIRE</option>
            <option value="small">SMALL</option>
            <option value="medium">MEDIUM</option>
            <option value="large" selected>LARGE</option>
        </select>
    </div>
    <div style="display: none !important;">
        <label for="lives-select">LIVES:</label>
        <select id="lives-select">
            <option value="3" selected>3</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="500">500</option>
            <option value="1000">1000</option>
        </select>
    </div>
    <div>
        <label for="ship-select">SHIP TYPE:</label>
        <select id="ship-select">
            <option value="classic" selected>CLASSIC</option>
            <option value="stealth">STEALTH</option>
            <option value="destroyer">DESTROYER</option>
            <option value="racer">RACER</option>
            <option value="alien">ALIEN</option>
            <option value="crystal">CRYSTAL</option>
        </select>
    </div>
    <div>
        <label for="sound-toggle">SOUND:</label>
        <button id="sound-toggle" class="toggle-button">ON</button>
    </div>
    <button id="start-button">START GAME</button>
</div>

<div id="ui" style="display: none">
    <div class="ui-row">
        <div id="score">SCORE: 0</div>
        <div id="high-score">HIGH SCORE: 0</div>
    </div>
    <div class="ui-row">
        <div id="lives">LIVES: 3</div>
        <div id="enemies-remaining">ENEMIES: 0/0</div>
    </div>
    <div class="ui-row">
        <div id="bombs">BOMBS: 3</div>
        <div id="power-ups">
            <div id="active-power">POWER: NONE</div>
        </div>
    </div>
    <div class="ui-row" style="align-items: center;">
        <div id="level-indicator">
            <div id="current-level">LEVEL: 1</div>
        </div>
    </div>
</div>

<!-- Include Three.js library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
    // --- Global Variables ---
    let scene, camera, renderer;
    let webMesh;
    let player;
    const projectiles = [];
    const enemies = [];
    const powerUps = [];
    const explosions = [];
    const keyState = {};
    let difficulty = 'medium'; // Default difficulty
    let shipType = 'classic'; // Default ship type


    // Mouse tracking variables
    let targetRotationX = 0;
    let targetRotationY = 0;
    let isRotationEnabled = false; // Flag to enable/disable tunnel rotation

    // localStorage keys
    const STORAGE_KEY_ROTATION_X = 'tempest3d_rotationX';
    const STORAGE_KEY_ROTATION_Y = 'tempest3d_rotationY';
    const STORAGE_KEY_ROTATION_ENABLED = 'tempest3d_rotationEnabled';
    const STORAGE_KEY_HIGH_SCORE = 'tempest3d_highScore';
    const STORAGE_KEY_SOUND_ENABLED = 'tempest3d_soundEnabled';

    // Debounce timer for saving rotation state
    let saveRotationTimer = null;

    // Game State
    let gameState = 'menu'; // 'menu', 'playing', 'paused', 'gameover', 'levelcomplete'
    let isPaused = false;

    // Sound State
    let isSoundEnabled = true; // Default to sound on


    // Web Configuration
    let NUM_LANES = 16;
    const WEB_DEPTH = 60;
    const WEB_RADIUS = 8;
    let LANE_ANGLE_STEP = (Math.PI * 2) / NUM_LANES;
    let webType = 'circle';
    let tubeWidth = 'medium'; // Options: 'wire', 'small', 'medium', 'large'

    // Fixed Z positions
    const PLAYER_Z = WEB_DEPTH / 2;
    const ENEMY_START_Z = -WEB_DEPTH / 2 + 1;
    const ENEMY_END_Z = WEB_DEPTH / 2 - 2;

    // Game mechanics
    const PROJECTILE_SPEED = 0.6;
    const COLLISION_Z_TOLERANCE = 1.0;
    const POWER_UP_CHANCE = 0.15; // 15% chance of power-up spawn per enemy kill
    const POWER_UP_DURATION = 10000; // 10 seconds
    const SPECIAL_ENEMY_CHANCE = 0.1; // 10% chance of special enemy
    const BOMB_POINTS = 3000;
    // Configurable Settings
    let playerLaneChangeRate = 6;
    let currentEnemySpeed = 0.08;
    let currentEnemySpawnInterval = 50;
    let enemiesPerLevel = 20;

    // Game stats
    let score = 0;
    let highScore = 0;
    let lives = 3;
    let level = 1;
    let enemiesKilled = 0;
    let enemiesRequired = enemiesPerLevel;
    let enemySpawnTimer = 0;
    let playerCurrentLaneIndex = Math.floor(NUM_LANES / 2);
    let lastLaneChangeFrame = 0;
    let activePowerUp = null;
    let powerUpTimer = 0;
    let lastFrameTime = 0;

    // Bomb variables
    let bombs = 0; // Start with 3 bombs
    let lastBombMilestone = 0; // Track the last score milestone for bomb rewards

    // --- UI Elements ---
    const uiElement = document.getElementById('ui');
    const scoreUI = document.getElementById('score');
    const highScoreUI = document.getElementById('high-score');
    const livesUI = document.getElementById('lives');
    const enemiesRemainingUI = document.getElementById('enemies-remaining');
    const bombsUI = document.getElementById('bombs');
    const powerUpUI = document.getElementById('active-power');
    const levelUI = document.getElementById('current-level');
    const pauseScreen = document.getElementById('pause-screen');
    const gameOverScreen = document.getElementById('game-over');
    const finalScoreUI = document.getElementById('final-score');
    const finalHighScoreUI = document.getElementById('final-high-score');
    const restartButton = document.getElementById('restart-button');
    const levelCompleteScreen = document.getElementById('level-complete');
    const levelScoreUI = document.getElementById('level-score');
    const levelHighScoreUI = document.getElementById('level-high-score');
    const nextLevelButton = document.getElementById('next-level-button');
    const menuElement = document.getElementById('menu');
    const speedSelect = document.getElementById('speed-select');
    const difficultySelect = document.getElementById('difficulty-select');
    const webTypeSelect = document.getElementById('web-type-select');
    const tubeWidthSelect = document.getElementById('tube-width-select');
    const livesSelect = document.getElementById('lives-select');
    const shipSelect = document.getElementById('ship-select');
    const startButton = document.getElementById('start-button');


    // --- Save and Load Rotation State ---
    function saveRotationState() {
        try {
            localStorage.setItem(STORAGE_KEY_ROTATION_X, targetRotationX);
            localStorage.setItem(STORAGE_KEY_ROTATION_Y, targetRotationY);
            localStorage.setItem(STORAGE_KEY_ROTATION_ENABLED, isRotationEnabled);
        } catch (e) {
            console.error("Failed to save rotation state to localStorage:", e);
        }
    }

    // --- Save and Load High Score ---
    function saveHighScore() {
        try {
            localStorage.setItem(STORAGE_KEY_HIGH_SCORE, highScore);
        } catch (e) {
            console.error("Failed to save high score to localStorage:", e);
        }
    }

    function loadHighScore() {
        try {
            const savedHighScore = localStorage.getItem(STORAGE_KEY_HIGH_SCORE);

            if (savedHighScore !== null) {
                highScore = parseInt(savedHighScore);
                updateHighScoreUI();
            }
        } catch (e) {
            console.error("Failed to load high score from localStorage:", e);
        }
    }

    // --- Save and Load Sound State ---
    function saveSoundState() {
        try {
            localStorage.setItem(STORAGE_KEY_SOUND_ENABLED, isSoundEnabled);
        } catch (e) {
            console.error("Failed to save sound state to localStorage:", e);
        }
    }

    function loadSoundState() {
        try {
            const savedSoundState = localStorage.getItem(STORAGE_KEY_SOUND_ENABLED);
            if (savedSoundState !== null) {
                isSoundEnabled = savedSoundState === 'true';
                updateSoundToggleButton();
            }
        } catch (e) {
            console.error("Failed to load sound state from localStorage:", e);
        }
    }

    // --- Toggle Sound ---
    function toggleSound() {
        isSoundEnabled = !isSoundEnabled;
        updateSoundToggleButton();
        saveSoundState();
    }

    // --- Update Sound Toggle Buttons ---
    function updateSoundToggleButton() {
        // Update menu sound toggle button
        const soundToggleButton = document.getElementById('sound-toggle');
        if (soundToggleButton) {
            soundToggleButton.textContent = isSoundEnabled ? 'ON' : 'OFF';
            if (isSoundEnabled) {
                soundToggleButton.classList.remove('off');
            } else {
                soundToggleButton.classList.add('off');
            }
        }

        // Update in-game sound toggle button
        const gameSoundToggleButton = document.getElementById('game-sound-toggle');
        if (gameSoundToggleButton) {
            gameSoundToggleButton.textContent = isSoundEnabled ? 'ON' : 'OFF';
            if (isSoundEnabled) {
                gameSoundToggleButton.classList.remove('off');
            } else {
                gameSoundToggleButton.classList.add('off');
            }
        }
    }

    // --- Mobile Controls Setup ---
    function setupMobileControls() {
        // Check if device is mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                         (window.innerWidth <= 800 && window.innerHeight <= 600);

        // Get mobile controls container
        const mobileControls = document.getElementById('mobile-controls');

        // Show mobile controls if on mobile device and if the element exists
        if (isMobile && mobileControls) {
            mobileControls.style.display = 'flex';

            // Update instructions modal for mobile
            const instructionsModal = document.getElementById('instructions-modal');
            if (instructionsModal) {
                // Update the content of the instructions modal for mobile
                instructionsModal.innerHTML = `
                    <h2>INSTRUCTIONS</h2>
                    <p>TOUCH: LEFT BUTTON MOVES RIGHT, RIGHT BUTTON MOVES LEFT</p>
                    <p>SWIPE: LEFT TO MOVE RIGHT, RIGHT TO MOVE LEFT</p>
                    <p>FIRE BUTTON: SHOOT | BOMB BUTTON: BOMB</p>
                    <p>PAUSE BUTTON: PAUSE | ROTATE BUTTON: TOGGLE ROTATION</p>
                    <p>DRAG: ROTATE TUNNEL</p>
                    <button id="close-instructions-button">CLOSE</button>
                `;

                // Re-add event listener for close button
                const closeInstructionsButton = document.getElementById('close-instructions-button');
                if (closeInstructionsButton) {
                    closeInstructionsButton.addEventListener('click', function() {
                        instructionsModal.style.display = 'none';
                        isPaused = false;
                    });
                }
            }

            // Get control buttons
            const leftButton = document.getElementById('left-button');
            const rightButton = document.getElementById('right-button');
            const fireButton = document.getElementById('fire-button');
            const bombButton = document.getElementById('bomb-button');
            const pauseButton = document.getElementById('pause-button');
            const rotateButton = document.getElementById('rotate-button');
            const pauseScreen = document.getElementById('pause-screen');
            const menuElement = document.getElementById('menu');

            // Touch event handlers for directional buttons
            if (leftButton) {
                leftButton.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    keyState['ArrowRight'] = true;
                });

                leftButton.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    keyState['ArrowRight'] = false;
                });
            }

            if (rightButton) {
                rightButton.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    keyState['ArrowLeft'] = true;
                });

                rightButton.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    keyState['ArrowLeft'] = false;
                });
            }

            // Fire button
            if (fireButton) {
                fireButton.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    keyState[' '] = true;
                    if (gameState === 'playing') {
                        createProjectile(activePowerUp === 'superProjectile');
                    }
                });

                fireButton.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    keyState[' '] = false;
                });
            }

            // Bomb button
            if (bombButton) {
                bombButton.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    if (gameState === 'playing' && !isPaused) {
                        activateBomb();
                    }
                });
            }

            // Pause button
            if (pauseButton && pauseScreen && menuElement) {
                pauseButton.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    if (gameState === 'playing') {
                        // Check if instructions modal is visible
                        const instructionsModal = document.getElementById('instructions-modal');
                        const isInstructionsVisible = instructionsModal && instructionsModal.style.display === 'block';

                        // Only toggle pause if instructions are not visible
                        if (!isInstructionsVisible) {
                            isPaused = !isPaused;
                            pauseScreen.style.display = isPaused ? 'block' : 'none';
                            menuElement.style.display = isPaused ? 'block' : 'none';

                            if (!isPaused) {
                                // Apply settings when resuming
                                applyGameSettings();
                            }
                        }
                    }
                });
            }

            // Rotation button
            if (rotateButton) {
                rotateButton.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    // Toggle rotation enabled flag
                    isRotationEnabled = !isRotationEnabled;

                    // Visual feedback - change button text
                    rotateButton.innerHTML = isRotationEnabled ? "ROTATE ON" : "ROTATE OFF";

                    // Save rotation state to localStorage
                    saveRotationState();
                });
            }

            // Variables for touch rotation and swipe detection
            let lastTouchX = 0;
            let lastTouchY = 0;
            let touchStartTime = 0;
            let lastTapTime = 0;
            let touchStartX = 0;
            let isSwiping = false;
            const SWIPE_THRESHOLD = 50; // Minimum distance for a swipe

            // Touch events for tunnel rotation and swipe detection
            if (renderer && renderer.domElement) {
                renderer.domElement.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    lastTouchX = touch.clientX;
                    lastTouchY = touch.clientY;
                    touchStartX = touch.clientX; // Store initial X position for swipe detection
                    touchStartTime = Date.now();
                    isSwiping = false; // Reset swipe state

                    // Check for double tap (toggle rotation)
                    const currentTime = Date.now();
                    if (currentTime - lastTapTime < 300) { // 300ms between taps
                        // Toggle rotation enabled flag
                        isRotationEnabled = !isRotationEnabled;
                        // Save rotation state to localStorage
                        saveRotationState();
                        e.preventDefault(); // Prevent zoom
                    }
                    lastTapTime = currentTime;
                });

                renderer.domElement.addEventListener('touchmove', function(e) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const touchX = touch.clientX;
                    const touchY = touch.clientY;

                    // Calculate delta movement
                    const deltaX = touchX - lastTouchX;
                    const deltaY = touchY - lastTouchY;

                    // Check for horizontal swipe
                    const swipeDistance = touchX - touchStartX;

                    // If we're playing and the swipe is significant
                    if (gameState === 'playing' && !isPaused && Math.abs(swipeDistance) > SWIPE_THRESHOLD && !isSwiping) {
                        isSwiping = true; // Mark that we've detected a swipe

                        // Determine swipe direction and trigger movement
                        if (swipeDistance < 0) {
                            // Swipe left - move right (inverted)
                            keyState['ArrowRight'] = true;
                            setTimeout(() => { keyState['ArrowRight'] = false; }, 100);
                        } else {
                            // Swipe right - move left (inverted)
                            keyState['ArrowLeft'] = true;
                            setTimeout(() => { keyState['ArrowLeft'] = false; }, 100);
                        }
                    }

                    // Handle rotation if enabled
                    if (isRotationEnabled && gameState === 'playing') {
                        // Update target rotation based on touch movement
                        targetRotationY += deltaX * 0.005;
                        targetRotationX += deltaY * 0.005;

                        // Debounced save of rotation state
                        if (saveRotationTimer) {
                            clearTimeout(saveRotationTimer);
                        }
                        saveRotationTimer = setTimeout(() => {
                            saveRotationState();
                            saveRotationTimer = null;
                        }, 500);
                    }

                    // Update last touch position
                    lastTouchX = touchX;
                    lastTouchY = touchY;
                });

                renderer.domElement.addEventListener('touchend', function(e) {
                    // Reset swipe state
                    isSwiping = false;
                });
            }
        }
    }

    // Sound effects object
    const sounds = {
        fire: null,
        explode: null,
        powerUp: null,
        bomb: null,
        initialized: false,

        // Initialize all sounds
        init: function() {
            // Laser sound (short beep) - using WAV format
            this.fire = fireSound;

            // Explosion sound (boom) - using WAV format
            this.explode = explosionSound;

            // Power-up sound (chime) - using WAV format
            this.powerUp = powerUpSound;

            this.bomb = bombSound;

            // Pre-load sounds
            this.fire.load();
            this.explode.load();
            this.powerUp.load();
            this.bomb.load();
        },

        // Initialize audio context after user interaction
        initializeAudio: function() {
            if (!this.initialized) {
                // Create an AudioContext to ensure proper initialization
                if (!window.audioContext) {
                    try {
                        window.AudioContext = window.AudioContext || window.webkitAudioContext;
                        window.audioContext = new AudioContext();
                    } catch (e) {
                        console.log("Failed to create AudioContext:", e);
                    }
                }

                // Resume the AudioContext if it's suspended
                if (window.audioContext && window.audioContext.state === 'suspended') {
                    window.audioContext.resume().catch(e => {
                        console.log("Failed to resume AudioContext:", e);
                    });
                }

                // Play a silent sound to unlock audio on mobile devices
                const silentSound = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQQAAAAAAA==');
                silentSound.play().then(() => {
                    console.log("Audio context initialized");
                    this.initialized = true;
                }).catch(e => {
                    console.log("Failed to initialize audio context:", e);
                });

                // Also try to initialize all sound elements
                if (this.fire) this.fire.load();
                if (this.explode) this.explode.load();
                if (this.powerUp) this.powerUp.load();
                if (this.bomb) this.bomb.load();
            }
        },

        // Play a sound with error handling
        play: function(sound) {
            // If sounds are disabled, don't play anything
            if (!isSoundEnabled) {
                return;
            }

            // If not initialized, try to initialize first
            if (!this.initialized) {
                this.initializeAudio();
            }

            if (this[sound]) {
                try {
                    // Try to resume AudioContext if it exists and is suspended
                    if (window.audioContext && window.audioContext.state === 'suspended') {
                        window.audioContext.resume().catch(e => {
                            console.log("Failed to resume AudioContext:", e);
                        });
                    }

                    // Clone the audio to allow overlapping sounds
                    const soundClone = this[sound].cloneNode();
                    soundClone.volume = 0.5; // Set volume to 50%

                    // Play the sound with error handling
                    const playPromise = soundClone.play();

                    // Handle browsers where play() doesn't return a promise
                    if (playPromise !== undefined) {
                        playPromise.catch(e => {
                            console.log("Error playing sound:", e);
                            // If failed due to no user interaction, we'll try again after interaction
                            if (e.name === "NotAllowedError") {
                                this.initialized = false;

                                // Add a one-time click event listener to the document to initialize audio on next interaction
                                if (!window.audioInitializationClickHandler) {
                                    window.audioInitializationClickHandler = true;
                                    document.addEventListener('click', () => {
                                        this.initializeAudio();
                                        window.audioInitializationClickHandler = false;
                                    }, { once: true });
                                }
                            }
                        });
                    }
                } catch (e) {
                    console.log("Exception when trying to play sound:", e);
                    this.initialized = false;
                }
            }
        }
    };

    // --- Initialization Function ---
    function init() {
        // Load high score
        loadHighScore();

        // Load sound state
        loadSoundState();

        // Initialize sounds
        sounds.init();

        // Scene setup
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);

        // Camera setup
        camera = new THREE.PerspectiveCamera(
          90,
          window.innerWidth / window.innerHeight,
          0.1,
          1000
        );
        camera.position.set(0, .6, WEB_DEPTH / 2 + 15);
        camera.lookAt(0, 0, 0);

        // Renderer setup
        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Add lighting to enhance 3D effects
        addLighting();

        // Create the initial web - it will be recreated with startGame
        createWeb(webType);

        // Create player
        createPlayer();
        player.visible = false;

        // Initial state: show menu, hide game UI/game over
        if (uiElement) uiElement.style.display = 'none';

        const powerUpsElement = document.getElementById('power-ups');
        if (powerUpsElement) powerUpsElement.style.display = 'none';

        const levelIndicatorElement = document.getElementById('level-indicator');
        if (levelIndicatorElement) levelIndicatorElement.style.display = 'none';

        if (gameOverScreen) gameOverScreen.style.display = 'none';
        // We don't need to hide the level complete screen anymore as it's not shown
        // if (levelCompleteScreen) levelCompleteScreen.style.display = 'none';
        if (menuElement) menuElement.style.display = 'block';

        const instructionsButton = document.getElementById('instructions-button');
        const instructionsModal = document.getElementById('instructions-modal');
        const closeInstructionsButton = document.getElementById('close-instructions-button');

        // Add event listener for instructions button
        if (instructionsButton && instructionsModal && closeInstructionsButton) {
            instructionsButton.addEventListener('click', function() {
                instructionsModal.style.display = 'block';
                isPaused = true;
            });

            closeInstructionsButton.addEventListener('click', function() {
                instructionsModal.style.display = 'none';
                isPaused = false;
            });
        }

        // Event Listeners
        window.addEventListener('resize', onWindowResize);
        window.addEventListener('keydown', onKeyDown);
        window.addEventListener('keyup', onKeyUp);
        window.addEventListener('click', onMouseClick);

        // Button listeners
        if (startButton) startButton.addEventListener('click', startGame);
        if (restartButton) restartButton.addEventListener('click', restartGame);
        // We don't need the next level button anymore as levels continue automatically
        // if (nextLevelButton) nextLevelButton.addEventListener('click', nextLevel);

        // Sound toggle buttons listeners
        const soundToggleButton = document.getElementById('sound-toggle');
        const gameSoundToggleButton = document.getElementById('game-sound-toggle');

        if (soundToggleButton) soundToggleButton.addEventListener('click', toggleSound);
        if (gameSoundToggleButton) gameSoundToggleButton.addEventListener('click', toggleSound);


        // Start the animation loop
        lastFrameTime = performance.now();
        animate();
    }

    // --- Add scene lighting ---
    function addLighting() {
        // Add ambient light for base illumination
        const ambientLight = new THREE.AmbientLight(0x202020);
        scene.add(ambientLight);

        // Add directional light for shadows and depth
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set(0, 20, 10);
        scene.add(directionalLight);

        // Add point light at camera position for dynamic lighting
        const pointLight = new THREE.PointLight(0x0088ff, 0.8, 50);
        pointLight.position.copy(camera.position);
        scene.add(pointLight);
    }

    // --- Create Web Geometry based on selected type ---
    function createWeb(type) {
        // Remove existing web if any
        if (webMesh) {
            scene.remove(webMesh);
        }

        let shape;
        webType = type;

        switch (type) {
            case 'pentagon':
                NUM_LANES = 5; // 5 sides
                shape = createPolygonWeb(NUM_LANES);
                break;
            case 'hexagon':
                NUM_LANES = 6; // 6 sides
                shape = createPolygonWeb(NUM_LANES);
                break;
            case 'octagon':
                NUM_LANES = 8; // 8 sides
                shape = createPolygonWeb(NUM_LANES);
                break;
            case 'random':
                // Create a random polygon between 5 and 8 sides
                NUM_LANES = Math.floor(Math.random() * 4) + 5; // 5 to 8 sides
                shape = createPolygonWeb(NUM_LANES);
                break;
            case 'circle':
            default:
                // Circle-like polygon with 16 sides
                NUM_LANES = 16;
                shape = createPolygonWeb(NUM_LANES);
                break;
        }

        // Update LANE_ANGLE_STEP based on NUM_LANES
        LANE_ANGLE_STEP = (Math.PI * 2) / NUM_LANES;

        const extrudeSettings = {
            steps: 1,
            depth: WEB_DEPTH,
            bevelEnabled: false
        };

        const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
        geometry.translate(0, 0, -WEB_DEPTH / 2);

        // Create enhanced wireframe with tube-like effect
        const edges = new THREE.EdgesGeometry(geometry);

        // Create a group to hold all tube segments
        webMesh = new THREE.Group();

        // Get the positions from the edges geometry
        const positions = edges.attributes.position.array;

        // Create tube segments for each edge
        for (let i = 0; i < positions.length; i += 6) {
            // Each edge has two vertices (start and end)
            const startPoint = new THREE.Vector3(
              positions[i], positions[i + 1], positions[i + 2]
            );
            const endPoint = new THREE.Vector3(
              positions[i + 3], positions[i + 4], positions[i + 5]
            );

            // Create a path for the tube
            const path = new THREE.CatmullRomCurve3([startPoint, endPoint]);

            // Create tube geometry with radius proportional to web size and selected width
            let tubeRadiusMultiplier;
            switch (tubeWidth) {
                case 'wire':
                    tubeRadiusMultiplier = 0.0005;
                    break; // 0.5% of web radius
                case 'small':
                    tubeRadiusMultiplier = 0.001;
                    break; // 1% of web radius
                case 'medium':
                    tubeRadiusMultiplier = 0.002;
                    break; // 2% of web radius (default)
                case 'large':
                    tubeRadiusMultiplier = 0.004;
                    break; // 4% of web radius
                default:
                    tubeRadiusMultiplier = 0.02; // Default to medium
            }
            const tubeRadius = WEB_RADIUS * tubeRadiusMultiplier;
            const tubeGeometry = new THREE.TubeGeometry(
              path,
              1,              // tubularSegments
              tubeRadius,     // radius
              8,              // radialSegments
              false           // closed
            );

            // Create material with glow effect
            const tubeMaterial = new THREE.MeshPhongMaterial({
                color: 0x00ffff,
                emissive: 0x00ffff,
                emissiveIntensity: 0.3,
                transparent: true,
                opacity: 0.8,
                shininess: 30
            });

            // Create mesh and add to group
            const tubeMesh = new THREE.Mesh(tubeGeometry, tubeMaterial);
            webMesh.add(tubeMesh);
        }

        // Apply saved rotation values if available, otherwise use neutral position
        if (targetRotationX !== 0 || targetRotationY !== 0) {
            webMesh.rotation.x = targetRotationX;
            webMesh.rotation.y = targetRotationY;
        } else {
            webMesh.rotation.x = 0;
            webMesh.rotation.y = 0;
        }

        scene.add(webMesh);
    }

    // Helper functions to create different web shapes
    function createPolygonWeb(sides) {
        const shape = new THREE.Shape();
        shape.moveTo(WEB_RADIUS, 0);
        for (let i = 1; i <= sides; i++) {
            const angle = (i / sides) * Math.PI * 2;
            shape.lineTo(WEB_RADIUS * Math.cos(angle), WEB_RADIUS * Math.sin(angle));
        }
        return shape;
    }

    function createSquareWeb() {
        const shape = new THREE.Shape();
        const size = WEB_RADIUS * 1.5;
        shape.moveTo(size, size);
        shape.lineTo(-size, size);
        shape.lineTo(-size, -size);
        shape.lineTo(size, -size);
        shape.lineTo(size, size);
        return shape;
    }

    function createTriangleWeb() {
        const shape = new THREE.Shape();
        const size = WEB_RADIUS * 1.8;
        shape.moveTo(0, size);
        shape.lineTo(-size, -size / 2);
        shape.lineTo(size, -size / 2);
        shape.lineTo(0, size);
        return shape;
    }

    // --- Create Player with enhanced visuals ---
    function createPlayer() {
        // Remove existing player if any
        if (player) {
            scene.remove(player);
            // Proper disposal (optional for this example, but good practice)
            player.traverse(child => {
                if (child.isMesh) {
                    child.geometry.dispose();
                    if (Array.isArray(child.material)) {
                        child.material.forEach(material => material.dispose());
                    } else {
                        child.material.dispose();
                    }
                }
            });
        }

        player = new THREE.Group();

        // Common material options
        const materialOptions = {
            shininess: 10, // Low shininess for a less glossy, more plastic/painted look
            flatShading: true // Crucial for the retro, low-poly aesthetic
        };

        // Create ship based on selected type
        switch (shipType) {
            case 'classic':
                createClassicShip(materialOptions);
                break;
            case 'stealth':
                createStealthShip(materialOptions);
                break;
            case 'destroyer':
                createDestroyerShip(materialOptions);
                break;
            case 'racer':
                createRacerShip(materialOptions);
                break;
            case 'alien':
                createAlienShip(materialOptions);
                break;
            case 'crystal':
                createCrystalShip(materialOptions);
                break;
            default:
                createClassicShip(materialOptions);
        }

        // Add player to scene
        scene.add(player);
    }

    // --- Classic Ship Design ---
    function createClassicShip(materialOptions) {
        const shipBlue = 0x0055ff; // Classic player blue
        const shipRed = 0xff0000;   // Accent red
        const shipYellow = 0xffff00; // Accent yellow

        // --- Main Body ---
        // A slightly wedge-shaped or trapezoidal body is common
        const bodyShape = new THREE.Shape();
        const bodyWidth = 0.8;
        const bodyDepthFront = 0.4;
        const bodyDepthBack = 0.7;
        const bodyLength = 1.0;

        bodyShape.moveTo(-bodyWidth / 2, -bodyLength / 2 + bodyDepthFront); // Back-left
        bodyShape.lineTo(bodyWidth / 2, -bodyLength / 2 + bodyDepthFront);  // Back-right
        bodyShape.lineTo(bodyWidth / 2, bodyLength / 2 - bodyDepthBack);   // Front-right (tapered)
        bodyShape.lineTo(-bodyWidth / 2, bodyLength / 2 - bodyDepthBack);  // Front-left (tapered)
        bodyShape.closePath();

        const extrudeSettings = {
            steps: 1,
            depth: 0.3, // Thickness of the body
            bevelEnabled: false,
        };
        const bodyGeometry = new THREE.ExtrudeGeometry(bodyShape, extrudeSettings);
        const bodyMaterial = new THREE.MeshPhongMaterial({ color: shipBlue, ...materialOptions });
        const mainBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        mainBody.rotation.x = Math.PI / 2; // Lay it flat
        mainBody.position.z = -0.15; // Adjust position to align with prongs
        player.add(mainBody);


        // --- "Prongs" / "Cannons" (the iconic forward parts) ---
        const prongLength = 1.0;
        const prongWidth = 0.25;
        const prongHeight = 0.25;

        const prongGeometry = new THREE.BoxGeometry(prongWidth, prongHeight, prongLength);
        const prongMaterial = new THREE.MeshPhongMaterial({ color: shipBlue, ...materialOptions });

        // Left Prong
        const leftProng = new THREE.Mesh(prongGeometry, prongMaterial);
        leftProng.position.set(-0.35, 0, 0.2); // Position to the side and slightly forward of body center
        player.add(leftProng);

        // Right Prong
        const rightProng = new THREE.Mesh(prongGeometry, prongMaterial);
        rightProng.position.set(0.35, 0, 0.2); // Position to the side and slightly forward of body center
        player.add(rightProng);

        // Prong Tips (Red accents)
        const tipGeometry = new THREE.BoxGeometry(prongWidth, prongHeight, 0.2);
        const tipMaterial = new THREE.MeshPhongMaterial({ color: shipRed, ...materialOptions });

        const leftTip = new THREE.Mesh(tipGeometry, tipMaterial);
        leftTip.position.set(0, 0, prongLength / 2 + 0.1); // At the front of the prong
        leftProng.add(leftTip); // Add as child of prong for easier positioning

        const rightTip = new THREE.Mesh(tipGeometry, tipMaterial);
        rightTip.position.set(0, 0, prongLength / 2 + 0.1); // At the front of the prong
        rightProng.add(rightTip); // Add as child of prong


        // --- Cockpit ---
        // A simple, slightly raised block
        const cockpitWidth = 0.3;
        const cockpitHeight = 0.2;
        const cockpitDepth = 0.25;
        const cockpitGeometry = new THREE.BoxGeometry(cockpitWidth, cockpitHeight, cockpitDepth);
        const cockpitMaterial = new THREE.MeshPhongMaterial({ color: shipYellow, ...materialOptions, emissive:0x333300 });
        const cockpit = new THREE.Mesh(cockpitGeometry, cockpitMaterial);
        cockpit.position.set(0, extrudeSettings.depth / 2 + cockpitHeight / 2 -0.05, -0.3); // On top of the body, slightly back
        player.add(cockpit);


        // --- Thruster ---
        // Simple cone, often red or orange
        const thrusterRadius = 0.2;
        const thrusterHeight = 0.4;
        const thrusterGeometry = new THREE.ConeGeometry(thrusterRadius, thrusterHeight, 8); // 8 segments for blockiness
        const thrusterMaterial = new THREE.MeshPhongMaterial({
            color: shipRed,
            emissive: 0xcc3300, // Make it glow a bit
            emissiveIntensity: 0.7,
            ...materialOptions
        });
        const thruster = new THREE.Mesh(thrusterGeometry, thrusterMaterial);
        // Position at the back of the main body. The mainBody was extruded along Z, then rotated.
        // Let's place it relative to the player group's origin.
        thruster.position.set(0, 0, -0.6); // Slightly behind the main body
        thruster.rotation.x = Math.PI / 2; // Pointing backwards along negative Z local to player group
        player.add(thruster);


        // --- Player Orientation ---
        // Ships typically "face up" on the screen.
        // If your game's "forward" is along -Z (common), you might want to rotate the ship.
        // player.rotation.y = Math.PI; // To face -Z if designed pointing +Z

        // If you want it to look like it's flying "into" the screen (like Space Harrier)
        // this default orientation (prongs along +Z) is fine.

        // For a top-down view, you'd typically orient your camera above.
        // And the ship might be rotated to "face" the top of the screen.
        // player.rotation.x = -Math.PI / 2; // If Z is forward, this makes Y "up" for the ship
        // player.rotation.z = Math.PI; // If you want the cockpit at the "top"
    }

    // --- Stealth Ship Design ---
    function createStealthShip(materialOptions) {
        const stealthBlack = 0x222222; // Dark black for stealth
        const stealthPurple = 0x8800ff; // Purple accent
        const stealthGreen = 0x00ff88; // Green accent for cockpit

        // --- Main Body (sleek, angular design) ---
        const bodyShape = new THREE.Shape();
        const bodyWidth = 0.7; // Narrower than classic
        const bodyLength = 1.2; // Longer than classic

        // Create a more angular, arrow-like shape
        bodyShape.moveTo(0, bodyLength / 2); // Front point
        bodyShape.lineTo(-bodyWidth / 2, -bodyLength / 2); // Back-left
        bodyShape.lineTo(bodyWidth / 2, -bodyLength / 2); // Back-right
        bodyShape.lineTo(0, bodyLength / 2); // Back to front point

        const extrudeSettings = {
            steps: 1,
            depth: 0.15, // Thinner than classic
            bevelEnabled: false,
        };

        const bodyGeometry = new THREE.ExtrudeGeometry(bodyShape, extrudeSettings);
        const bodyMaterial = new THREE.MeshPhongMaterial({
            color: stealthBlack,
            ...materialOptions,
            emissive: 0x111111,
            emissiveIntensity: 0.3
        });

        const mainBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        mainBody.rotation.x = Math.PI / 2; // Lay it flat
        player.add(mainBody);

        // --- Wings (thin, swept-back) ---
        const wingGeometry = new THREE.BoxGeometry(1.2, 0.05, 0.6);
        const wingMaterial = new THREE.MeshPhongMaterial({ color: stealthBlack, ...materialOptions });

        const wings = new THREE.Mesh(wingGeometry, wingMaterial);
        wings.position.set(0, 0, -0.2);
        wings.rotation.x = Math.PI / 12; // Slight angle
        player.add(wings);

        // --- Cockpit (small, glowing) ---
        const cockpitGeometry = new THREE.SphereGeometry(0.15, 8, 8);
        const cockpitMaterial = new THREE.MeshPhongMaterial({
            color: stealthGreen,
            ...materialOptions,
            emissive: 0x003322,
            emissiveIntensity: 0.7
        });

        const cockpit = new THREE.Mesh(cockpitGeometry, cockpitMaterial);
        cockpit.position.set(0, 0.1, 0.2);
        cockpit.scale.set(1, 0.5, 1); // Flatten it a bit
        player.add(cockpit);

        // --- Engine Glow ---
        const engineGlowGeometry = new THREE.CircleGeometry(0.2, 8);
        const engineGlowMaterial = new THREE.MeshBasicMaterial({
            color: stealthPurple,
            transparent: true,
            opacity: 0.7
        });

        const engineGlow = new THREE.Mesh(engineGlowGeometry, engineGlowMaterial);
        engineGlow.position.set(0, 0, -0.6);
        engineGlow.rotation.x = Math.PI / 2;
        player.add(engineGlow);
    }

    // --- Destroyer Ship Design ---
    function createDestroyerShip(materialOptions) {
        const destroyerGray = 0x444444; // Dark gray for main body
        const destroyerRed = 0xcc0000; // Dark red for accents
        const destroyerOrange = 0xff6600; // Orange for weapons

        // --- Main Body (bulky, imposing) ---
        const bodyGeometry = new THREE.BoxGeometry(1.0, 0.4, 1.5);
        const bodyMaterial = new THREE.MeshPhongMaterial({ color: destroyerGray, ...materialOptions });

        const mainBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        player.add(mainBody);

        // --- Side Armor Plates ---
        const armorGeometry = new THREE.BoxGeometry(0.3, 0.5, 1.2);
        const armorMaterial = new THREE.MeshPhongMaterial({ color: destroyerGray, ...materialOptions });

        const leftArmor = new THREE.Mesh(armorGeometry, armorMaterial);
        leftArmor.position.set(-0.6, 0, 0);
        player.add(leftArmor);

        const rightArmor = new THREE.Mesh(armorGeometry, armorMaterial);
        rightArmor.position.set(0.6, 0, 0);
        player.add(rightArmor);

        // --- Weapon Turrets ---
        const turretGeometry = new THREE.CylinderGeometry(0.15, 0.15, 0.2, 8);
        const turretMaterial = new THREE.MeshPhongMaterial({ color: destroyerOrange, ...materialOptions });

        const frontLeftTurret = new THREE.Mesh(turretGeometry, turretMaterial);
        frontLeftTurret.position.set(-0.4, 0.3, 0.5);
        player.add(frontLeftTurret);

        const frontRightTurret = new THREE.Mesh(turretGeometry, turretMaterial);
        frontRightTurret.position.set(0.4, 0.3, 0.5);
        player.add(frontRightTurret);

        // --- Cannon Barrels ---
        const barrelGeometry = new THREE.CylinderGeometry(0.05, 0.05, 0.4, 8);
        const barrelMaterial = new THREE.MeshPhongMaterial({ color: destroyerGray, ...materialOptions });

        const leftBarrel = new THREE.Mesh(barrelGeometry, barrelMaterial);
        leftBarrel.position.set(0, 0, 0.3);
        leftBarrel.rotation.x = Math.PI / 2;
        frontLeftTurret.add(leftBarrel);

        const rightBarrel = new THREE.Mesh(barrelGeometry, barrelMaterial);
        rightBarrel.position.set(0, 0, 0.3);
        rightBarrel.rotation.x = Math.PI / 2;
        frontRightTurret.add(rightBarrel);

        // --- Command Bridge ---
        const bridgeGeometry = new THREE.BoxGeometry(0.5, 0.2, 0.4);
        const bridgeMaterial = new THREE.MeshPhongMaterial({
            color: destroyerRed,
            ...materialOptions,
            emissive: 0x330000,
            emissiveIntensity: 0.5
        });

        const bridge = new THREE.Mesh(bridgeGeometry, bridgeMaterial);
        bridge.position.set(0, 0.3, -0.3);
        player.add(bridge);

        // --- Engine Exhausts ---
        const exhaustGeometry = new THREE.CylinderGeometry(0.1, 0.15, 0.2, 8);
        const exhaustMaterial = new THREE.MeshPhongMaterial({
            color: destroyerRed,
            ...materialOptions,
            emissive: 0xff3300,
            emissiveIntensity: 0.8
        });

        const leftExhaust = new THREE.Mesh(exhaustGeometry, exhaustMaterial);
        leftExhaust.position.set(-0.3, -0.1, -0.8);
        leftExhaust.rotation.x = Math.PI / 2;
        player.add(leftExhaust);

        const rightExhaust = new THREE.Mesh(exhaustGeometry, exhaustMaterial);
        rightExhaust.position.set(0.3, -0.1, -0.8);
        rightExhaust.rotation.x = Math.PI / 2;
        player.add(rightExhaust);
    }

    // --- Racer Ship Design ---
    function createRacerShip(materialOptions) {
        const racerBlue = 0x00aaff; // Bright blue for main body
        const racerYellow = 0xffcc00; // Yellow for accents
        const racerSilver = 0xcccccc; // Silver for details

        // --- Main Body (sleek, aerodynamic) ---
        const bodyShape = new THREE.Shape();
        const bodyWidth = 0.6; // Narrow
        const bodyLength = 1.4; // Long

        // Create a teardrop shape
        bodyShape.moveTo(0, bodyLength / 2); // Front point
        bodyShape.bezierCurveTo(
            bodyWidth / 2, bodyLength / 3, // Control point 1
            bodyWidth / 2, -bodyLength / 2, // Control point 2
            0, -bodyLength / 2 // End point (back center)
        );
        bodyShape.bezierCurveTo(
            -bodyWidth / 2, -bodyLength / 2, // Control point 1
            -bodyWidth / 2, bodyLength / 3, // Control point 2
            0, bodyLength / 2 // End point (back to front)
        );

        const extrudeSettings = {
            steps: 1,
            depth: 0.2,
            bevelEnabled: false,
        };

        const bodyGeometry = new THREE.ExtrudeGeometry(bodyShape, extrudeSettings);
        const bodyMaterial = new THREE.MeshPhongMaterial({
            color: racerBlue,
            ...materialOptions,
            shininess: 30 // More shiny than other ships
        });

        const mainBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        mainBody.rotation.x = Math.PI / 2; // Lay it flat
        player.add(mainBody);

        // --- Racing Stripes ---
        const stripeGeometry = new THREE.BoxGeometry(0.05, 0.05, 1.2);
        const stripeMaterial = new THREE.MeshPhongMaterial({
            color: racerYellow,
            ...materialOptions,
            emissive: 0x332200,
            emissiveIntensity: 0.5
        });

        const leftStripe = new THREE.Mesh(stripeGeometry, stripeMaterial);
        leftStripe.position.set(-0.2, 0.15, 0);
        player.add(leftStripe);

        const rightStripe = new THREE.Mesh(stripeGeometry, stripeMaterial);
        rightStripe.position.set(0.2, 0.15, 0);
        player.add(rightStripe);

        // --- Cockpit (streamlined) ---
        const cockpitGeometry = new THREE.SphereGeometry(0.15, 16, 8);
        const cockpitMaterial = new THREE.MeshPhongMaterial({
            color: racerSilver,
            ...materialOptions,
            opacity: 0.7,
            transparent: true
        });

        const cockpit = new THREE.Mesh(cockpitGeometry, cockpitMaterial);
        cockpit.position.set(0, 0.2, 0.3);
        cockpit.scale.set(1, 0.4, 1.5); // Flatten and stretch
        player.add(cockpit);

        // --- Fins ---
        const finGeometry = new THREE.BoxGeometry(0.05, 0.3, 0.4);
        const finMaterial = new THREE.MeshPhongMaterial({ color: racerBlue, ...materialOptions });

        const topFin = new THREE.Mesh(finGeometry, finMaterial);
        topFin.position.set(0, 0.3, -0.4);
        player.add(topFin);

        // --- Engine Glow ---
        const engineGlowGeometry = new THREE.RingGeometry(0.05, 0.15, 8);
        const engineGlowMaterial = new THREE.MeshBasicMaterial({
            color: racerYellow,
            transparent: true,
            opacity: 0.8,
            side: THREE.DoubleSide
        });

        const engineGlow = new THREE.Mesh(engineGlowGeometry, engineGlowMaterial);
        engineGlow.position.set(0, 0, -0.7);
        engineGlow.rotation.x = Math.PI / 2;
        player.add(engineGlow);
    }

    // --- Alien Ship Design ---
    function createAlienShip(materialOptions) {
        const alienGreen = 0x00ff66; // Bright green for main body
        const alienPurple = 0xaa00ff; // Purple for accents
        const alienBlue = 0x00ffff; // Cyan for details

        // --- Main Body (organic, saucer-like) ---
        const bodyGeometry = new THREE.SphereGeometry(0.6, 16, 8);
        const bodyMaterial = new THREE.MeshPhongMaterial({
            color: alienGreen,
            ...materialOptions,
            emissive: 0x003322,
            emissiveIntensity: 0.3
        });

        const mainBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        mainBody.scale.set(1, 0.3, 1); // Flatten into a saucer
        player.add(mainBody);

        // --- Dome ---
        const domeGeometry = new THREE.SphereGeometry(0.3, 16, 8, 0, Math.PI * 2, 0, Math.PI / 2);
        const domeMaterial = new THREE.MeshPhongMaterial({
            color: alienBlue,
            ...materialOptions,
            opacity: 0.7,
            transparent: true
        });

        const dome = new THREE.Mesh(domeGeometry, domeMaterial);
        dome.position.set(0, 0.15, 0);
        dome.rotation.x = Math.PI;
        player.add(dome);

        // --- Tentacle-like Appendages ---
        const tentacleGeometry = new THREE.CylinderGeometry(0.05, 0.02, 0.5, 8);
        const tentacleMaterial = new THREE.MeshPhongMaterial({ color: alienPurple, ...materialOptions });

        // Create multiple tentacles around the ship
        for (let i = 0; i < 6; i++) {
            const angle = (i / 6) * Math.PI * 2;
            const x = Math.cos(angle) * 0.5;
            const z = Math.sin(angle) * 0.5;

            const tentacle = new THREE.Mesh(tentacleGeometry, tentacleMaterial);
            tentacle.position.set(x, -0.2, z);

            // Angle tentacles outward
            tentacle.rotation.x = Math.PI / 4;
            tentacle.rotation.y = -angle;

            player.add(tentacle);
        }

        // --- Glowing Orbs ---
        const orbGeometry = new THREE.SphereGeometry(0.08, 8, 8);
        const orbMaterial = new THREE.MeshBasicMaterial({
            color: alienBlue,
            transparent: true,
            opacity: 0.9
        });

        // Add orbs around the rim
        for (let i = 0; i < 8; i++) {
            const angle = (i / 8) * Math.PI * 2;
            const x = Math.cos(angle) * 0.55;
            const z = Math.sin(angle) * 0.55;

            const orb = new THREE.Mesh(orbGeometry, orbMaterial);
            orb.position.set(x, 0, z);
            player.add(orb);
        }

        // --- Bottom Glow ---
        const glowGeometry = new THREE.CircleGeometry(0.4, 16);
        const glowMaterial = new THREE.MeshBasicMaterial({
            color: alienGreen,
            transparent: true,
            opacity: 0.5,
            side: THREE.DoubleSide
        });

        const bottomGlow = new THREE.Mesh(glowGeometry, glowMaterial);
        bottomGlow.position.set(0, -0.15, 0);
        bottomGlow.rotation.x = Math.PI / 2;
        player.add(bottomGlow);
    }

    // --- Crystal Ship Design ---
    function createCrystalShip(materialOptions) {
        const crystalBlue = 0x66ccff; // Light blue for crystal
        const crystalPink = 0xff66cc; // Pink for accents
        const crystalWhite = 0xffffff; // White for core

        // --- Main Crystal Body ---
        const bodyGeometry = new THREE.OctahedronGeometry(0.6, 0); // Low poly crystal shape
        const bodyMaterial = new THREE.MeshPhongMaterial({
            color: crystalBlue,
            ...materialOptions,
            opacity: 0.7,
            transparent: true,
            shininess: 100 // Very shiny
        });

        const mainBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        mainBody.rotation.x = Math.PI / 4; // Tilt for better orientation
        player.add(mainBody);

        // --- Inner Core ---
        const coreGeometry = new THREE.OctahedronGeometry(0.3, 0);
        const coreMaterial = new THREE.MeshPhongMaterial({
            color: crystalWhite,
            ...materialOptions,
            emissive: 0xaaaaaa,
            emissiveIntensity: 0.8
        });

        const core = new THREE.Mesh(coreGeometry, coreMaterial);
        core.rotation.x = Math.PI / 4; // Match main body rotation
        player.add(core);

        // --- Crystal Shards ---
        const shardGeometry = new THREE.TetrahedronGeometry(0.2, 0);
        const shardMaterial = new THREE.MeshPhongMaterial({
            color: crystalPink,
            ...materialOptions,
            opacity: 0.8,
            transparent: true
        });

        // Add crystal shards around the main body
        for (let i = 0; i < 5; i++) {
            const angle = (i / 5) * Math.PI * 2;
            const x = Math.cos(angle) * 0.7;
            const z = Math.sin(angle) * 0.7;

            const shard = new THREE.Mesh(shardGeometry, shardMaterial);
            shard.position.set(x, 0, z);

            // Rotate shards to point outward
            shard.lookAt(new THREE.Vector3(x * 2, 0, z * 2));

            player.add(shard);
        }

        // --- Top Crystal ---
        const topShardGeometry = new THREE.ConeGeometry(0.2, 0.5, 4);
        const topShardMaterial = new THREE.MeshPhongMaterial({
            color: crystalPink,
            ...materialOptions,
            opacity: 0.8,
            transparent: true
        });

        const topShard = new THREE.Mesh(topShardGeometry, topShardMaterial);
        topShard.position.set(0, 0.7, 0);
        player.add(topShard);

        // --- Energy Field ---
        const fieldGeometry = new THREE.SphereGeometry(0.8, 8, 8);
        const fieldMaterial = new THREE.MeshBasicMaterial({
            color: crystalBlue,
            transparent: true,
            opacity: 0.2,
            wireframe: true
        });

        const energyField = new THREE.Mesh(fieldGeometry, fieldMaterial);
        player.add(energyField);
    }

    // --- Update Player Position ---
    function updatePlayerPosition() {
        // Calculate position based on current lane and web type
        let x, y;
        let angle;

        // For circle or random polygon
        angle = playerCurrentLaneIndex * LANE_ANGLE_STEP;
        x = WEB_RADIUS * Math.cos(angle);
        y = WEB_RADIUS * Math.sin(angle);

        // Create a position vector
        const position = new THREE.Vector3(x, y, PLAYER_Z);

        // Apply tunnel rotation to player position
        if (webMesh) {
            // Create a rotation matrix from the web's rotation
            const rotationMatrix = new THREE.Matrix4();
            rotationMatrix.makeRotationFromEuler(new THREE.Euler(
              webMesh.rotation.x,
              webMesh.rotation.y,
              0 // Don't apply z rotation as it's just for visual effect
            ));

            // Apply rotation to position
            position.applyMatrix4(rotationMatrix);
        }

        // Update player position
        player.position.copy(position);

        // Update player rotation to face inward and account for tunnel rotation
        player.rotation.z = angle + Math.PI / 2;

        // Apply tunnel rotation to player orientation
        if (webMesh) {
            player.rotation.x = webMesh.rotation.x;
            player.rotation.y = webMesh.rotation.y;
        } else {
            player.rotation.x = 0;
            player.rotation.y = 0;
        }
    }

    // --- Set Game Settings ---
    function setGameSettings(speed, difficultyParam, web, width, lives) {
        // Player Speed
        switch (speed) {
            case 'slow':
                playerLaneChangeRate = 10;
                break;
            case 'normal':
                playerLaneChangeRate = 6;
                break;
            case 'fast':
                playerLaneChangeRate = 3;
                break;
            default:
                playerLaneChangeRate = 6;
        }

        // Store the difficulty in the global variable
        difficulty = difficultyParam;

        // Difficulty
        switch (difficultyParam) {
            case 'easy':
                currentEnemySpeed = 0.1;
                currentEnemySpawnInterval = 80;
                enemiesPerLevel = 15;
                break;
            case 'medium':
                currentEnemySpeed = 0.2;
                currentEnemySpawnInterval = 50;
                enemiesPerLevel = 20;
                break;
            case 'hard':
                currentEnemySpeed = 0.3;
                currentEnemySpawnInterval = 30;
                enemiesPerLevel = 25;
                break;
            default:
                currentEnemySpeed = 0.08;
                currentEnemySpawnInterval = 50;
                enemiesPerLevel = 20;
        }

        // Web Type
        webType = web;

        // Tube Width
        tubeWidth = width;

        // Lives
        // Convert to integer and ensure it's within the valid range
        const livesValue = parseInt(lives);
        if (!isNaN(livesValue) && livesValue >= 3 && livesValue <= 1000) {
            // We don't set the lives variable here, it will be set in startGame
            // This is just to validate the input
        }

    }

    // --- Start Game Function ---
    function startGame() {
        if (gameState === 'playing') return;

        // Initialize audio after user interaction
        sounds.initializeAudio();

        // Get selected settings
        const selectedSpeed = speedSelect.value;
        const selectedDifficulty = difficultySelect.value;
        const selectedWebType = webTypeSelect.value;
        const selectedTubeWidth = tubeWidthSelect.value;
        const selectedLives = livesSelect.value;
        const selectedShipType = shipSelect.value;

        // Update global ship type
        shipType = selectedShipType;

        setGameSettings(selectedSpeed, selectedDifficulty, selectedWebType, selectedTubeWidth, selectedLives);

        // Create the web based on selected type
        createWeb(selectedWebType);

        // Create player with selected ship type
        createPlayer();

        // Reset game state
        score = 0;
        lives = parseInt(selectedLives);
        level = 1;
        enemiesKilled = 0;
        enemiesRequired = enemiesPerLevel;
        enemySpawnTimer = 0;
        playerCurrentLaneIndex = Math.floor(NUM_LANES / 2);
        lastLaneChangeFrame = 0;
        activePowerUp = null;
        powerUpTimer = 0;
        bombs = 0; // Reset bombs to 0
        lastBombMilestone = 0; // Reset last bomb milestone


        // Load saved rotation state or use defaults
        //loadRotationState();

        // Clear existing game objects
        clearGameObjects();

        // Update player
        updatePlayerPosition();

        // Update UI
        updateScoreUI();
        updateHighScoreUI();
        updateLivesUI();
        updateLevelUI();
        updatePowerUpUI();
        updateEnemiesRemainingUI();
        updateBombsUI();

        uiElement.style.display = 'block';
        document.getElementById('power-ups').style.display = 'block';
        document.getElementById('level-indicator').style.display = 'block';
        gameOverScreen.style.display = 'none';
        // We don't need to hide the level complete screen anymore as it's not shown
        // levelCompleteScreen.style.display = 'none';
        menuElement.style.display = 'none';

        // Mobile device detection and touch controls setup
        setupMobileControls();

        gameState = 'playing';
        isPaused = false;
        player.visible = true;
    }

    // --- Reset for Next Level ---
    function nextLevel() {
        if (gameState !== 'levelcomplete') return;

        // Initialize audio after user interaction
        sounds.initializeAudio();

        // Increase level
        level++;

        // Add 1 life for completing a level
        lives++;
        updateLivesUI();

        // Increase difficulty
        currentEnemySpeed += 0.01;
        currentEnemySpawnInterval = Math.max(currentEnemySpawnInterval - 5, 20);

        // Scale number of enemies based on difficulty level and current level
        let difficultyMultiplier;
        switch (difficulty) {
            case 'easy':
                difficultyMultiplier = 1.0;
                break;
            case 'medium':
                difficultyMultiplier = 1.5;
                break;
            case 'hard':
                difficultyMultiplier = 2.0;
                break;
            default:
                difficultyMultiplier = 1.5;
        }

        // Calculate enemies required based on base amount, level, and difficulty
        enemiesRequired = Math.min(Math.floor(enemiesPerLevel + (level * 5 * difficultyMultiplier)), 100);

        // Reset level-specific variables
        enemiesKilled = 0;
        enemySpawnTimer = 0;

        // Save current rotation state before transitioning to next level
        saveRotationState();

        // Choose a new random web shape for variety
        const webTypes = ['circle', 'pentagon', 'hexagon', 'octagon', 'random'];
        const newWebType = webTypes[Math.floor(Math.random() * webTypes.length)];
        createWeb(newWebType);

        // Reset player position after new web creation
        playerCurrentLaneIndex = Math.floor(NUM_LANES / 2);
        updatePlayerPosition();

        // Clear objects from previous level
        clearGameObjects();

        // Update UI
        updateLevelUI();
        updateEnemiesRemainingUI();
        updateBombsUI();

        // We don't need to hide the level complete screen anymore as it's not shown
        // levelCompleteScreen.style.display = 'none';

        // Resume game
        gameState = 'playing';
        player.visible = true;
    }

    // --- Restart Game Function ---
    function restartGame() {
        // Initialize audio after user interaction
        sounds.initializeAudio();

        gameState = 'menu';
        gameOverScreen.style.display = 'none';
        menuElement.style.display = 'block';
        uiElement.style.display = 'none';
        document.getElementById('power-ups').style.display = 'none';
        document.getElementById('level-indicator').style.display = 'none';

        player.visible = false;
        clearGameObjects();
    }

    // --- Clear all game objects ---
    function clearGameObjects() {
        // Remove all enemies
        enemies.forEach(enemy => scene.remove(enemy));
        enemies.length = 0;

        // Remove all projectiles
        projectiles.forEach(p => scene.remove(p));
        projectiles.length = 0;

        // Remove all power-ups
        powerUps.forEach(p => scene.remove(p));
        powerUps.length = 0;

        // Remove all explosions
        explosions.forEach(e => scene.remove(e));
        explosions.length = 0;
    }

    // --- Create Standard Projectile ---
    function createProjectile(isSuperProjectile = false) {
        if (gameState !== 'playing' || isPaused) return;

        // Limit standard projectiles (unless super power active)
        if (!isSuperProjectile && !activePowerUp && projectiles.length > 5) return;

        const projectileGeometry = new THREE.BoxGeometry(0.3, 0.3, 2);

        // Different appearance for super projectiles
        const projectileMaterial = isSuperProjectile ?
          new THREE.MeshPhongMaterial({
              color: 0xff00ff,
              emissive: 0x880088,
              emissiveIntensity: 0.5,
              transparent: true,
              opacity: 0.8
          }) :
          new THREE.MeshPhongMaterial({
              color: 0xffff00,
              emissive: 0x888800,
              emissiveIntensity: 0.3
          });

        const projectile = new THREE.Mesh(projectileGeometry, projectileMaterial);

        // Position at player
        projectile.position.copy(player.position);
        projectile.position.z -= 1.5;

        // Copy player's rotation to align with tunnel rotation
        projectile.rotation.copy(player.rotation);

        // Store projectile properties
        projectile.laneIndex = playerCurrentLaneIndex;
        projectile.isSuper = isSuperProjectile;

        // Store direction vector for movement (accounting for tunnel rotation)
        const direction = new THREE.Vector3(0, 0, -1);
        if (webMesh) {
            // Create a rotation matrix from the web's rotation
            const rotationMatrix = new THREE.Matrix4();
            rotationMatrix.makeRotationFromEuler(new THREE.Euler(
              webMesh.rotation.x,
              webMesh.rotation.y,
              0 // Don't apply z rotation as it's just for visual effect
            ));

            // Apply rotation to direction
            direction.applyMatrix4(rotationMatrix);
        }
        projectile.direction = direction.normalize();

        scene.add(projectile);
        projectiles.push(projectile);

        // Play sound
        sounds.play('fire');
    }

    // --- Create Enemy ---
    function createEnemy(isSpecial = false) {
        if (gameState !== 'playing' || isPaused) return;

        // Geometry based on enemy type
        const enemyGeometry = isSpecial ?
          new THREE.OctahedronGeometry(1.2) :
          new THREE.TetrahedronGeometry(1);

        // Material based on enemy type
        const enemyMaterial = isSpecial ?
          new THREE.MeshPhongMaterial({
              color: 0xff0000,
              emissive: 0x880000,
              emissiveIntensity: 0.5,
              shininess: 30
          }) :
          new THREE.MeshPhongMaterial({
              color: 0x00ff00,
              emissive: 0x008800,
              emissiveIntensity: 0.3,
              shininess: 20
          });

        const enemy = new THREE.Mesh(enemyGeometry, enemyMaterial);

        // Random lane
        const laneIndex = Math.floor(Math.random() * NUM_LANES);

        // Position depends on web type
        let x, y;
        let angle;

        angle = laneIndex * LANE_ANGLE_STEP;
        x = WEB_RADIUS * Math.cos(angle);
        y = WEB_RADIUS * Math.sin(angle);

        // Create a position vector
        const position = new THREE.Vector3(x, y, ENEMY_START_Z);

        // Apply tunnel rotation to enemy position
        if (webMesh) {
            // Create a rotation matrix from the web's rotation
            const rotationMatrix = new THREE.Matrix4();
            rotationMatrix.makeRotationFromEuler(new THREE.Euler(
              webMesh.rotation.x,
              webMesh.rotation.y,
              0 // Don't apply z rotation as it's just for visual effect
            ));

            // Apply rotation to position
            position.applyMatrix4(rotationMatrix);
        }

        // Set enemy position
        enemy.position.copy(position);

        // Rotate enemy to face roughly towards the center
        enemy.rotation.z = angle;

        // Apply tunnel rotation to enemy orientation
        if (webMesh) {
            enemy.rotation.x = webMesh.rotation.x;
            enemy.rotation.y = webMesh.rotation.y;
        }

        // Add pulsating animation
        enemy.initialScale = isSpecial ? 1.2 : 1.0;
        enemy.pulsePhase = Math.random() * Math.PI * 2; // Random starting phase

        // Store enemy properties
        enemy.laneIndex = laneIndex;
        enemy.isSpecial = isSpecial;
        enemy.points = isSpecial ? 200 : 100;

        // Store direction vector for movement (accounting for tunnel rotation)
        const direction = new THREE.Vector3(0, 0, 1);
        if (webMesh) {
            // Create a rotation matrix from the web's rotation
            const rotationMatrix = new THREE.Matrix4();
            rotationMatrix.makeRotationFromEuler(new THREE.Euler(
              webMesh.rotation.x,
              webMesh.rotation.y,
              0 // Don't apply z rotation as it's just for visual effect
            ));

            // Apply rotation to direction
            direction.applyMatrix4(rotationMatrix);
        }
        enemy.direction = direction.normalize();

        scene.add(enemy);
        enemies.push(enemy);
    }

    // --- Create Power-Up ---
    function createPowerUp(position) {
        const powerTypes = ['rapidFire', 'extraLife', 'shield', 'superProjectile'];
        const powerType = powerTypes[Math.floor(Math.random() * powerTypes.length)];

        // Create power-up object
        const powerGeometry = new THREE.SphereGeometry(0.8, 8, 8);

        // Color based on power-up type
        let powerColor;
        switch (powerType) {
            case 'rapidFire':
                powerColor = 0xffaa00;
                break; // Orange
            case 'extraLife':
                powerColor = 0xff0000;
                break; // Red
            case 'shield':
                powerColor = 0x0088ff;
                break; // Blue
            case 'superProjectile':
                powerColor = 0xff00ff;
                break; // Magenta
            default:
                powerColor = 0xffffff; // White
        }

        const powerMaterial = new THREE.MeshPhongMaterial({
            color: powerColor,
            emissive: powerColor,
            emissiveIntensity: 0.5,
            transparent: true,
            opacity: 0.9,
            shininess: 50
        });

        const powerUp = new THREE.Mesh(powerGeometry, powerMaterial);

        // Position at enemy death location (passed in as argument)
        powerUp.position.copy(position);

        // Apply tunnel rotation to power-up orientation
        if (webMesh) {
            powerUp.rotation.x = webMesh.rotation.x;
            powerUp.rotation.y = webMesh.rotation.y;
        }

        // Store power-up properties
        powerUp.powerType = powerType;
        powerUp.rotationSpeed = 0.05;

        // Store direction vector for movement (accounting for tunnel rotation)
        const direction = new THREE.Vector3(0, 0, 1);
        if (webMesh) {
            // Create a rotation matrix from the web's rotation
            const rotationMatrix = new THREE.Matrix4();
            rotationMatrix.makeRotationFromEuler(new THREE.Euler(
              webMesh.rotation.x,
              webMesh.rotation.y,
              0 // Don't apply z rotation as it's just for visual effect
            ));

            // Apply rotation to direction
            direction.applyMatrix4(rotationMatrix);
        }
        powerUp.direction = direction.normalize();

        scene.add(powerUp);
        powerUps.push(powerUp);

        return powerUp;
    }

    // --- Create Explosion Effect ---
    function createExplosion(position, color) {
        const particleCount = 15;
        const explosionGroup = new THREE.Group();
        explosionGroup.position.copy(position);

        // Create particles
        for (let i = 0; i < particleCount; i++) {
            const particleGeometry = new THREE.SphereGeometry(0.2, 6, 6);
            const particleMaterial = new THREE.MeshPhongMaterial({
                color: color || 0xffaa00,
                emissive: color || 0xffaa00,
                emissiveIntensity: 0.5,
                transparent: true,
                opacity: 0.9
            });

            const particle = new THREE.Mesh(particleGeometry, particleMaterial);

            // Random position within explosion radius
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.random() * Math.PI;
            const radius = Math.random() * 0.5;

            particle.position.set(
              radius * Math.sin(phi) * Math.cos(theta),
              radius * Math.sin(phi) * Math.sin(theta),
              radius * Math.cos(phi)
            );

            // Random velocity
            particle.velocity = new THREE.Vector3(
              (Math.random() - 0.5) * 0.2,
              (Math.random() - 0.5) * 0.2,
              (Math.random() - 0.5) * 0.2
            );

            // Lifespan in milliseconds
            particle.life = 500;
            particle.maxLife = 500;

            explosionGroup.add(particle);
        }

        // Add to scene
        scene.add(explosionGroup);
        explosions.push(explosionGroup);

        // Play explosion sound
        sounds.play('explode');

        return explosionGroup;
    }

    // --- Apply Power-Up ---
    function applyPowerUp(powerType) {
        // Clear any existing power-up
        if (activePowerUp) {
            clearTimeout(powerUpTimer);
        }

        activePowerUp = powerType;
        updatePowerUpUI();

        // Apply power-up effect
        switch (powerType) {
            case 'rapidFire':
                // Rapid fire handled in update loop
                break;
            case 'extraLife':
                lives++;
                updateLivesUI();
                activePowerUp = null; // Immediate effect
                break;
            case 'shield':
                // Shield is handled in collision detection
                break;
            case 'superProjectile':
                // Super projectiles handled in projectile creation and collision
                break;
        }

        // Set timeout to clear power-up after duration (except extraLife which is immediate)
        if (powerType !== 'extraLife') {
            powerUpTimer = setTimeout(() => {
                activePowerUp = null;
                updatePowerUpUI();
            }, POWER_UP_DURATION);
        }

        // Play power-up sound
        sounds.play('powerUp');
    }

    // --- Update Game State (per frame) ---
    function update(deltaTime) {
        if (gameState !== 'playing' || isPaused) {
            return;
        }

        const currentFrame = renderer.info.render.frame;


        // --- Update player position to account for tunnel rotation ---
        if (webMesh) {
            updatePlayerPosition();
        }

        // --- Player Movement ---
        let laneChangeAttempt = false;
        let newLaneIndex = playerCurrentLaneIndex;

        if (keyState['ArrowLeft']) {
            newLaneIndex = (playerCurrentLaneIndex + 1) % NUM_LANES;
            laneChangeAttempt = true;
        } else if (keyState['ArrowRight']) {
            newLaneIndex = (playerCurrentLaneIndex - 1 + NUM_LANES) % NUM_LANES;
            laneChangeAttempt = true;
        }

        if (laneChangeAttempt && currentFrame >= lastLaneChangeFrame + playerLaneChangeRate) {
            playerCurrentLaneIndex = newLaneIndex;
            updatePlayerPosition();
            lastLaneChangeFrame = currentFrame;
        }

        // Handle automatic firing for rapid fire power-up
        if (activePowerUp === 'rapidFire' && currentFrame % 5 === 0) {
            createProjectile();
        }

        // --- Update Projectiles ---
        for (let i = projectiles.length - 1; i >= 0; i--) {
            const projectile = projectiles[i];

            // Move projectile along its direction vector (accounting for tunnel rotation)
            if (projectile.direction) {
                projectile.position.x += projectile.direction.x * PROJECTILE_SPEED;
                projectile.position.y += projectile.direction.y * PROJECTILE_SPEED;
                projectile.position.z += projectile.direction.z * PROJECTILE_SPEED;
            } else {
                // Fallback for projectiles created before this update
                projectile.position.z -= PROJECTILE_SPEED;
            }

            // Super projectiles have a trailing effect
            if (projectile.isSuper && Math.random() > 0.5) {
                const trailGeometry = new THREE.SphereGeometry(0.1, 4, 4);
                const trailMaterial = new THREE.MeshBasicMaterial({
                    color: 0xff00ff,
                    transparent: true,
                    opacity: 0.5
                });
                const trail = new THREE.Mesh(trailGeometry, trailMaterial);
                trail.position.copy(projectile.position);
                scene.add(trail);

                // Fade out trail
                setTimeout(() => {
                    scene.remove(trail);
                    trail.geometry.dispose();
                    trail.material.dispose();
                }, 500);
            }

            // Remove projectile if off screen
            if (projectile.position.z < ENEMY_START_Z - 5) {
                scene.remove(projectile);
                projectiles.splice(i, 1);
            }
        }

        // --- Update Enemies ---
        enemySpawnTimer++;

        // Spawn enemies until we've reached the level's required number
        if (enemySpawnTimer >= currentEnemySpawnInterval && enemies.length < enemiesRequired - enemiesKilled) {
            // Chance to spawn special enemy
            const isSpecial = Math.random() < SPECIAL_ENEMY_CHANCE;
            createEnemy(isSpecial);
            enemySpawnTimer = 0;
        }

        for (let i = enemies.length - 1; i >= 0; i--) {
            const enemy = enemies[i];

            // Move enemy along its direction vector (accounting for tunnel rotation)
            const speed = currentEnemySpeed * (enemy.isSpecial ? 1.5 : 1.0);
            if (enemy.direction) {
                enemy.position.x += enemy.direction.x * speed;
                enemy.position.y += enemy.direction.y * speed;
                enemy.position.z += enemy.direction.z * speed;
            } else {
                // Fallback for enemies created before this update
                enemy.position.z += speed;
            }

            // Pulsating animation
            const pulseScale = enemy.initialScale + Math.sin(enemy.pulsePhase) * 0.1;
            enemy.pulsePhase += 0.05;
            enemy.scale.set(pulseScale, pulseScale, pulseScale);

            // Special enemies also rotate
            if (enemy.isSpecial) {
                enemy.rotation.y += 0.03;
                enemy.rotation.x += 0.02;
            }

            // Check if enemy reached the player's end
            if (enemy.position.z > ENEMY_END_Z) {
                // Player loses a life if not shielded
                if (activePowerUp !== 'shield') {
                    loseLife();
                } else {
                    // Shield absorbs one hit
                    activePowerUp = null;
                    updatePowerUpUI();
                    clearTimeout(powerUpTimer);

                    // Visual effect for shield hit
                    createExplosion(enemy.position, 0x0088ff);
                }

                scene.remove(enemy);
                enemies.splice(i, 1);

                if (gameState !== 'playing') return;
            }
        }

        // --- Update Power-Ups ---
        for (let i = powerUps.length - 1; i >= 0; i--) {
            const powerUp = powerUps[i];

            // Move power-up towards player along its direction vector (accounting for tunnel rotation)
            const speed = currentEnemySpeed * 1.5; // Increased from 0.5 to 1.5 to make power-ups three times faster
            if (powerUp.direction) {
                powerUp.position.x += powerUp.direction.x * speed;
                powerUp.position.y += powerUp.direction.y * speed;
                powerUp.position.z += powerUp.direction.z * speed;
            } else {
                // Fallback for power-ups created before this update
                powerUp.position.z += speed;
            }

            // Rotate power-up
            powerUp.rotation.y += powerUp.rotationSpeed;
            powerUp.rotation.x += powerUp.rotationSpeed * 0.7;

            // Pulsate size
            const pulseScale = 1 + 0.1 * Math.sin(performance.now() * 0.005);
            powerUp.scale.set(pulseScale, pulseScale, pulseScale);

            // Check if power-up is collected
            if (powerUp.position.z > PLAYER_Z - 1 &&
              Math.abs(powerUp.position.x - player.position.x) < 2 &&
              Math.abs(powerUp.position.y - player.position.y) < 2) {

                // Collect power-up
                applyPowerUp(powerUp.powerType);

                // Remove power-up
                scene.remove(powerUp);
                powerUps.splice(i, 1);
            }

            // Remove if past player
            if (powerUp.position.z > PLAYER_Z + 5) {
                scene.remove(powerUp);
                powerUps.splice(i, 1);
            }
        }

        // --- Update Explosions ---
        for (let i = explosions.length - 1; i >= 0; i--) {
            const explosion = explosions[i];
            let removeExplosion = true;

            // Update each particle
            explosion.children.forEach(particle => {
                particle.position.add(particle.velocity);
                particle.life -= deltaTime;

                // Fade out particle
                if (particle.life > 0) {
                    particle.material.opacity = particle.life / particle.maxLife;
                    removeExplosion = false;
                } else {
                    particle.material.opacity = 0;
                }
            });

            // Remove explosion if all particles are dead
            if (removeExplosion) {
                // Clean up all particles
                explosion.children.forEach(particle => {
                    particle.geometry.dispose();
                    particle.material.dispose();
                });
                scene.remove(explosion);
                explosions.splice(i, 1);
            }
        }

        // --- Collision Detection (Projectile vs Enemy) ---
        for (let i = projectiles.length - 1; i >= 0; i--) {
            const projectile = projectiles[i];
            let projectileHit = false;

            for (let j = enemies.length - 1; j >= 0; j--) {
                const enemy = enemies[j];

                // Check if in same lane and close enough on Z axis
                if (projectile.laneIndex === enemy.laneIndex &&
                  Math.abs(projectile.position.z - enemy.position.z) < COLLISION_Z_TOLERANCE) {

                    // Collision detected!
                    const hitPoints = enemy.points;
                    addScore(hitPoints);
                    enemiesKilled++;
                    updateEnemiesRemainingUI();

                    // Create explosion effect
                    createExplosion(enemy.position, enemy.isSpecial ? 0xff0000 : 0x00ff00);

                    // Chance to spawn power-up
                    if (Math.random() < POWER_UP_CHANCE || enemy.isSpecial) {
                        createPowerUp(enemy.position);
                    }

                    // Remove enemy
                    scene.remove(enemy);
                    enemies.splice(j, 1);

                    // Super projectiles can pass through enemies
                    if (!projectile.isSuper) {
                        // Remove projectile
                        scene.remove(projectile);
                        projectiles.splice(i, 1);
                        projectileHit = true;
                    }

                    // Check if level is complete
                    if (enemiesKilled >= enemiesRequired) {
                        completedLevel();
                    }

                    // Break inner loop if projectile was destroyed
                    if (projectileHit) break;
                }
            }
        }
    }

    // --- Game Over Logic ---
    function loseLife() {
        if (gameState !== 'playing') return;

        lives--;
        updateLivesUI();

        // Visual indication
        createExplosion(player.position, 0xff0000);

        // Make player flash
        let flashCount = 0;
        const flashInterval = setInterval(() => {
            player.visible = !player.visible;
            flashCount++;
            if (flashCount >= 6) {
                clearInterval(flashInterval);
                player.visible = true;
            }
        }, 200);

        if (lives <= 0) {
            endGame();
        }
    }

    function endGame() {
        if (gameState !== 'playing') return;

        // Save rotation state before ending the game
        saveRotationState();

        gameState = 'gameover';
        finalScoreUI.textContent = 'FINAL SCORE: ' + score;
        finalHighScoreUI.textContent = 'HIGH SCORE: ' + highScore;
        gameOverScreen.style.display = 'block';
        uiElement.style.display = 'none';
        document.getElementById('power-ups').style.display = 'none';
        document.getElementById('level-indicator').style.display = 'none';

        // Clear game objects
        clearGameObjects();

        // Hide player
        player.visible = false;

        // Clear power-up timer
        if (activePowerUp) {
            clearTimeout(powerUpTimer);
            activePowerUp = null;
        }


    }


    // --- Level Complete Logic ---
    function completedLevel() {
        if (gameState !== 'playing') return;

        // Save rotation state before completing the level
        saveRotationState();

        gameState = 'levelcomplete';

        // Bonus points for completing level
        const levelBonus = level * 500;
        addScore(levelBonus);

        // Play level complete sound
        // sounds.levelComplete.play();

        // Clear power-up timer
        if (activePowerUp) {
            clearTimeout(powerUpTimer);
            activePowerUp = null;
        }

        // Show level up message
        showMessage("LEVEL " + level + " COMPLETE!", 0x00ffff);

        // Automatically continue to next level after a short delay
        setTimeout(nextLevel, 2000);
    }

    // --- UI Updates ---
    function addScore(points) {
        score += points;
        updateScoreUI();

        // Update high score if current score is higher
        if (score > highScore) {
            highScore = score;
            updateHighScoreUI();
            saveHighScore();
        }

        // Check for bomb reward milestone (every 1000 points)
        const currentMilestone = Math.floor(score / BOMB_POINTS);
        if (currentMilestone > lastBombMilestone) {
            // Award a new bomb for each milestone passed
            const newBombs = currentMilestone - lastBombMilestone;

            // Add bombs, but don't exceed the maximum of 30000000
            bombs = Math.min(bombs + newBombs, 3000000);

            // Update the last milestone
            lastBombMilestone = currentMilestone;

            // Update the bombs UI
            updateBombsUI();

            // Visual feedback for getting a new bomb
            const message = newBombs === 1 ? "NEW BOMB ACQUIRED!" : newBombs + " NEW BOMBS ACQUIRED!";
            showMessage(message, 0xffff00);
        }
    }

    // Helper function to show temporary messages
    function showMessage(text, color) {
        // Create a div for the message
        const messageDiv = document.createElement('div');
        messageDiv.textContent = text;
        messageDiv.style.position = 'absolute';
        messageDiv.style.top = '50%';
        messageDiv.style.left = '50%';
        messageDiv.style.transform = 'translate(-50%, -50%)';
        messageDiv.style.color = '#' + color.toString(16);
        messageDiv.style.textShadow = '0 0 10px #' + color.toString(16);
        messageDiv.style.fontSize = '2em';
        messageDiv.style.fontFamily = "Orbitron, sans-serif";
        messageDiv.style.zIndex = '1000';
        messageDiv.style.pointerEvents = 'none';

        // Add to document
        document.body.appendChild(messageDiv);

        // Fade out and float up after 2 seconds
        setTimeout(() => {
            messageDiv.style.transition = 'opacity 1s, transform 1s';
            messageDiv.style.opacity = '0';
            messageDiv.style.transform = 'translate(-50%, -150%)'; // Move upward while fading
            setTimeout(() => {
                document.body.removeChild(messageDiv);
            }, 1000);
        }, 1000);
    }

    function updateScoreUI() {
        scoreUI.textContent = 'SCORE: ' + score;
    }

    function updateHighScoreUI() {
        highScoreUI.textContent = 'HIGH SCORE: ' + highScore;
    }

    function updateLivesUI() {
        livesUI.textContent = 'LIVES: ' + lives;
    }

    function updateLevelUI() {
        levelUI.textContent = 'LEVEL: ' + level;
    }

    function updatePowerUpUI() {
        let powerText = 'POWER: ';

        switch (activePowerUp) {
            case 'rapidFire':
                powerText += 'RAPID FIRE';
                break;
            case 'shield':
                powerText += 'SHIELD';
                break;
            case 'superProjectile':
                powerText += 'SUPER SHOT';
                break;
            default:
                powerText += 'NONE';
        }

        powerUpUI.textContent = powerText;
    }

    function updateEnemiesRemainingUI() {
        const remaining = Math.max(0, enemiesRequired - enemiesKilled);
        enemiesRemainingUI.textContent = 'ENEMIES: ' + remaining + '/' + enemiesRequired;
    }

    function updateBombsUI() {
        bombsUI.textContent = 'BOMBS: ' + bombs;
    }



    // --- Animation Loop ---
    function animate() {
        requestAnimationFrame(animate);

        // Calculate delta time
        const currentTime = performance.now();
        const deltaTime = currentTime - lastFrameTime;
        lastFrameTime = currentTime;

        // Always update web rotation, even when paused
        //updateWebRotation();

        // Update game state
        if (!isPaused) {
            update(deltaTime);
        }

        // Render
        renderer.render(scene, camera);
    }

    // --- Event Handlers ---
    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function onKeyDown(event) {
        keyState[event.key] = true;

        // Handle firing
        if (gameState === 'playing' && event.key === ' ') {
            // Create super projectile if power-up is active
            createProjectile(activePowerUp === 'superProjectile');
        }

        // Handle bomb activation
        if (gameState === 'playing' && !isPaused && event.key.toLowerCase() === 'b') {
            activateBomb();
        }

        // Toggle pause
        if (gameState === 'playing' && (event.key === 'p' || event.key === 'Enter')) {
            // Check if instructions modal is visible
            const instructionsModal = document.getElementById('instructions-modal');
            const isInstructionsVisible = instructionsModal && instructionsModal.style.display === 'block';

            // Only toggle pause if instructions are not visible
            if (!isInstructionsVisible) {
                isPaused = !isPaused;
                pauseScreen.style.display = isPaused ? 'block' : 'none';
                menuElement.style.display = isPaused ? 'block' : 'none';

                if (!isPaused) {
                    // Apply settings when resuming
                    applyGameSettings();
                }
            }
        }

        // Prevent scrolling when pressing space, arrow keys, or Enter
        if ([' ', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', 'b', 'B'].includes(event.key)) {
            event.preventDefault();
        }
    }

    function onKeyUp(event) {
        keyState[event.key] = false;
    }

    function onMouseClick(event) {
        // Allow toggling rotation if game is playing, even when paused
        if (gameState === 'playing') {
            // Toggle rotation enabled flag
            isRotationEnabled = !isRotationEnabled;

            // Save rotation state to localStorage
            saveRotationState();
        }
    }

    // --- Bomb Activation Function ---
    function activateBomb() {
        // Check if there are bombs available
        if (bombs <= 0) return;

        // Decrease bomb count
        bombs--;
        updateBombsUI();

        sounds.play('bomb');

        // Create a large explosion effect at the center of the web
        const centerExplosion = createExplosion(new THREE.Vector3(0, 0, 0), 0xff0000);
        centerExplosion.scale.set(3, 3, 3); // Make the explosion larger

        // Track total points from destroyed enemies
        let totalPoints = 0;

        // Destroy all visible enemies
        for (let i = enemies.length - 1; i >= 0; i--) {
            const enemy = enemies[i];

            // Add points for each enemy
            totalPoints += enemy.points;

            // Create explosion effect at enemy position
            createExplosion(enemy.position, enemy.isSpecial ? 0xff0000 : 0x00ff00);

            // Remove enemy
            scene.remove(enemy);
            enemies.splice(i, 1);

            // Increment enemies killed count
            enemiesKilled++;
        }

        // Add score for destroyed enemies
        if (totalPoints > 0) {
            addScore(totalPoints);
            updateEnemiesRemainingUI();
        }

        // Check if level is complete
        if (enemiesKilled >= enemiesRequired) {
            completedLevel();
        }
    }

    // --- Apply Game Settings ---
    function applyGameSettings() {
        // Get selected settings
        const selectedSpeed = speedSelect.value;
        const selectedDifficulty = difficultySelect.value;
        const selectedWebType = webTypeSelect.value;
        const selectedTubeWidth = tubeWidthSelect.value;
        const selectedLives = livesSelect.value;

        // Apply settings
        setGameSettings(selectedSpeed, selectedDifficulty, selectedWebType, selectedTubeWidth, selectedLives);

        // Recreate the web if the web type has changed
        if (webType !== selectedWebType) {
            createWeb(selectedWebType);
            // Reset player position after new web creation
            playerCurrentLaneIndex = Math.floor(NUM_LANES / 2);
            updatePlayerPosition();
        }
    }

    const fireSound = new Audio('data:audio/wav;base64,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');

    const explosionSound = new Audio('data:audio/wav;base64,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')

    const powerUpSound = new Audio('data:audio/wav;base64,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3/m4nA0IEfMkjhNGKQ5pUK5EGOnGTMn37VP+v9xrkkWGq5GWCYgL/hJQLOUpgKCUliRDfSIRoC443cHQS5o8QlffVtgXu8n1soYT3+ueethGINBY/LsIK6kaMWTq3t/9UBE7/9xPTOWxNRShDNu0GO7k6yarmu7mnOljbMD+2IZzudW5jiulqtu4uASaLfYCIBat/tyGC8gWgRLfouGLGlWxAmJv3G+mI7yuZqoDmIigkm2sySdSK1P/+5BE7QADq0nRexN86GSpOf9hDadNASdD7CJ04Zkk6D2Brpyk7TFZomkpVBJFFkE0HRPevMx+BXQXf//zEkXbrOmSZktTUV6P/3//TJUpkTbMY4Raog3/dsAXbNydCREFhBnjNGsAUJerKCyI48B9HkryYknx2GAJsgdns7orrZ0FoOtaDnEGZBk0VnHUfMWqKklqRTTC3kNNOyTq61qSep5wpKZEwSRROI10tkFIJat2+9qkvuxdWehXdUEAUXc0ZD8qSQABAAAcxUxhyppa8uEQMPPGELGfNDJgGAWHGQaPcdNGApjortdQGsYWHithqgnQFGkRAaUCKA5hASHC5jiZgyYhAFoAfIOcYl0uniIjmmw7gbBYXPicxoFpZMkBMiLWU5ZAOYYmAuQcQY4B7WXkUTEyMzdmW0zIAUSfK5FDQZwuqSS7K/kTNlm5fJ8nCcNFooqS1JfMSt59BEvl8zE7EENCu9kda20f//TL5uXEEE1Mbl83LiCP1a/////+ySmL5fT/9T0yEKw0OaGDO+/lhYAAAAC5SGksGZ8+mkn/+7BE1wAC8EnQ/WIACGiJOg+sNAEZ1d83+amCAeEV5z81kAD2Y9CLODUgBoelTMmKM1TgtgwmgBcWy+wOALuRJrQgyNwZpohQOIVx3aiUukWsOJrqaO5OOVjTU2P53/i/0t2/VpaXLLuWGPEfM/qSOmRK//q/Ke////xSnD7hD////bVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EETdj/AAAH+HAAAIAAAP8OAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV')

    const bombSound = new Audio('data:audio/wav;base64,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')

    // --- Setup Audio Initialization on User Interaction ---
    // Add event listeners to initialize audio on first user interaction
    const initAudioOnInteraction = () => {
        sounds.initializeAudio();
        // Remove the event listeners once audio is initialized
        document.removeEventListener('click', initAudioOnInteraction);
        document.removeEventListener('keydown', initAudioOnInteraction);
        document.removeEventListener('touchstart', initAudioOnInteraction);
    };

    // Add event listeners for common user interactions
    document.addEventListener('click', initAudioOnInteraction);
    document.addEventListener('keydown', initAudioOnInteraction);
    document.addEventListener('touchstart', initAudioOnInteraction);

    // --- Start the Game ---
    init();

</script>
</body>
</html>
